<div class="edit-job-container">
  <div class="back-button">
    <a routerLink="/admindashboard" class="btn btn-link">
      <i class="fas fa-arrow-left"></i> Back to Dashboard
    </a>
  </div>

  <div class="card">
    <div class="card-header">
      <h2>Edit Job</h2>
    </div>
    
    <div class="card-body">
      <div *ngIf="loading" class="text-center py-4">
        <div class="spinner-border text-primary" role="status">
          <span class="visually-hidden">Loading...</span>
        </div>
        <p class="mt-2">Loading job details...</p>
      </div>

      <div *ngIf="!loading">
        <div *ngIf="error" class="alert alert-danger">
          {{ error }}
        </div>

        <form [formGroup]="jobForm" (ngSubmit)="onSubmit()">
          <div class="mb-3">
            <label for="title" class="form-label">Job Title *</label>
            <input 
              type="text" 
              id="title" 
              formControlName="title"
              class="form-control"
              [class.is-invalid]="f['title'].touched && f['title'].invalid"
            >
            <div *ngIf="f['title'].touched && f['title'].invalid" class="invalid-feedback">
              <div *ngIf="f['title'].errors?.['required']">Title is required</div>
              <div *ngIf="f['title'].errors?.['minlength']">
                Title must be at least 3 characters
              </div>
            </div>
          </div>

          <div class="mb-3">
            <label for="description" class="form-label">Job Description *</label>
            <textarea 
              id="description" 
              formControlName="description"
              class="form-control"
              rows="5"
              [class.is-invalid]="f['description'].touched && f['description'].invalid"
            ></textarea>
            <div *ngIf="f['description'].touched && f['description'].invalid" class="invalid-feedback">
              <div *ngIf="f['description'].errors?.['required']">Description is required</div>
              <div *ngIf="f['description'].errors?.['minlength']">
                Description must be at least 10 characters
              </div>
            </div>
          </div>

          <div class="d-flex justify-content-between mt-4">
            <button 
              type="button" 
              class="btn btn-outline-secondary"
              (click)="onCancel()"
              [disabled]="submitting"
            >
              Cancel
            </button>
            
            <button 
              type="submit" 
              class="btn btn-primary"
              [disabled]="jobForm.invalid || submitting"
            >
              <span *ngIf="submitting" class="spinner-border spinner-border-sm me-2" role="status"></span>
              {{ submitting ? 'Saving...' : 'Save Changes' }}
            </button>
          </div>
        </form>
      </div>
    </div>
  </div>
</div>
